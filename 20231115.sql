--게시판 테이블
CREATE TABLE BOARD_MEMBER(
	MEMBER_ID VARCHAR2(30),
	MEMBER_PASSWD CHAR(128),
	MEMBER_NAME VARCHAR2(30),
	MEMBER_NICK VARCHAR2(30)	
);

CREATE TABLE BOARD(
	BOARD_NO NUMBER,
	BOARD_TITLE VARCHAR2(300),
	BOARD_CONTENT VARCHAR2(3000),
	BOARD_WRITE_TIME DATE DEFAULT SYSDATE,
	BOARD_COUNT NUMBER,
	MEMBER_ID VARCHAR2(30)
);

CREATE TABLE BOARD_LIKE(
	BOARD_NO NUMBER,
	MEMBER_ID VARCHAR2(30)
);

CREATE TABLE BOARD_HATE(
	BOARD_NO NUMBER,
	MEMBER_ID VARCHAR2(30)
);

CREATE TABLE BOARD_COMMENT(
	BOARD_COMMENT_NO NUMBER,
	BOARD_COMMENT_CONTENT VARCHAR2(1000),
	BOARD_COMMENT_TIME DATE DEFAULT SYSDATE,
	BOARD_NO NUMBER,
	MEMBER_ID VARCHAR2(30)
);

CREATE TABLE BOARD_COMMENT_LIKE(
	BOARD_COMMENT_NO NUMBER,
	MEMBER_ID VARCHAR2(30)
);

CREATE TABLE BOARD_COMMENT_HATE(
	BOARD_COMMENT_NO NUMBER,
	MEMBER_ID VARCHAR2(30)
);

CREATE TABLE BOARD_FILE(
	BOARD_FILE_NO CHAR(10),
	BOARD_NO NUMBER,
	BOARD_FILE_URL VARCHAR2(500)
);

--제약 조건
ALTER TABLE BOARD_MEMBER ADD CONSTRAINT BOARD_MEMBER_PK PRIMARY KEY(MEMBER_ID);

ALTER TABLE BOARD ADD CONSTRAINT BOARD_PK PRIMARY KEY(BOARD_NO);
ALTER TABLE BOARD ADD CONSTRAINT BOARD_FK_MEMBER_ID 
FOREIGN KEY(MEMBER_ID) REFERENCES BOARD_MEMBER(MEMBER_ID) ON DELETE CASCADE;
 
ALTER TABLE BOARD_LIKE ADD 
CONSTRAINT BOARD_LIKE_PK PRIMARY KEY(BOARD_NO, MEMBER_ID);

ALTER TABLE BOARD_LIKE ADD CONSTRAINT BOARD_LIKE_FK_BNO
FOREIGN KEY (BOARD_NO) REFERENCES BOARD(BOARD_NO);

ALTER TABLE BOARD_LIKE ADD CONSTRAINT BOARD_LIKE_FK_MID
FOREIGN KEY (MEMBER_ID) REFERENCES BOARD_MEMBER(MEMBER_ID);

ALTER TABLE BOARD_HATE ADD 
CONSTRAINT BOARD_HATE_PK PRIMARY KEY(BOARD_NO, MEMBER_ID);

ALTER TABLE BOARD_HATE ADD CONSTRAINT BOARD_HATE_FK_BNO
FOREIGN KEY (BOARD_NO) REFERENCES BOARD(BOARD_NO);

ALTER TABLE BOARD_HATE ADD CONSTRAINT BOARD_HATE_FK_MID
FOREIGN KEY (MEMBER_ID) REFERENCES BOARD_MEMBER(MEMBER_ID);


ALTER TABLE BOARD_COMMENT 
ADD CONSTRAINT BOARD_COMMENT_PK PRIMARY KEY(BOARD_COMMENT_NO);

ALTER TABLE BOARD_COMMENT_LIKE ADD 
CONSTRAINT BOARD_COMMENT_LIKE_PK PRIMARY KEY(BOARD_COMMENT_NO, MEMBER_ID);

ALTER TABLE BOARD_COMMENT_LIKE ADD CONSTRAINT BOARD_COMMENT_LIKE_FK_BNO
FOREIGN KEY (BOARD_COMMENT_NO) REFERENCES BOARD_COMMENT(BOARD_COMMENT_NO);

ALTER TABLE BOARD_COMMENT_LIKE ADD CONSTRAINT BOARD_COMMENT_LIKE_FK_MID
FOREIGN KEY (MEMBER_ID) REFERENCES BOARD_MEMBER(MEMBER_ID);

ALTER TABLE BOARD_COMMENT_HATE ADD 
CONSTRAINT BOARD_COMMENT_HATE_PK PRIMARY KEY(BOARD_COMMENT_NO, MEMBER_ID);

ALTER TABLE BOARD_COMMENT_HATE ADD CONSTRAINT BOARD_COMMENT_HATE_FK_BNO
FOREIGN KEY (BOARD_COMMENT_NO) REFERENCES BOARD_COMMENT(BOARD_COMMENT_NO);

ALTER TABLE BOARD_COMMENT_HATE ADD CONSTRAINT BOARD_COMMENT_HATE_FK_MID
FOREIGN KEY (MEMBER_ID) REFERENCES BOARD_MEMBER(MEMBER_ID);

ALTER TABLE BOARD_FILE 
ADD CONSTRAINT BOARD_FILE_PK PRIMARY KEY(BOARD_FILE_NO);

ALTER TABLE BOARD_FILE 
ADD CONSTRAINT BOARD_FILE_FK_BNO FOREIGN KEY(BOARD_NO) REFERENCES BOARD(BOARD_NO);

--게시글 번호, 댓글 번호
CREATE SEQUENCE BOARD_SEQ_BNO;
CREATE SEQUENCE BOARD_COMMENT_SEQ_CNO;



















